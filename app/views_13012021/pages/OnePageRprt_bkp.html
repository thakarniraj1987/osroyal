<div class="content-wrapper">
    <div class="load-box" ng-show="loading">
            <img id="mySpinner" src="app/images/loading1.gif" />
        </div>
<h1 class="page-heading"> One Page Report</h1>    

 <form name="Master" >
<div class="row">
 		<div  class="form-group  col-lg-4 col-md-4 col-sm-12 col-xs-12 padding" ng-if=" UserType == 0">
            <label>Master</label>
            <select name="MasterID" ng-model="formData.MasterId" ng-change="GetDealer(formData.MasterId,1)" class="form-control">
<option value="" >Please Select Master</option>  
                <option ng-repeat="Master in MasterData" value="{{Master.mstrid}}">{{Master.mstruserid}}</option>           
            </select>
        </div>
        <div  class="form-group  col-lg-4 col-md-4 col-sm-12 col-xs-12 padding"  ng-if=" UserType == 0 ||  UserType == 1">
            <label>Super Agent</label>
            <select name="DealerID" ng-model="formData.SuperAgentId" ng-change="GetDealer(formData.SuperAgentId,2)" class="form-control">
<option value="" >Please Select Super Agent</option>  
                <option ng-repeat="SuperAgent in SuperAgentData" value="{{SuperAgent.mstrid}}">{{SuperAgent.mstruserid}}</option>           
            </select>
        </div>
     <div  class="form-group  col-lg-4 col-md-4 col-sm-12 col-xs-12 padding"  ng-if=" UserType == 0 ||  UserType == 2 ||  UserType == 1 ">
            <label> Agent</label>
            <select name="DealerID" ng-model="formData.AgentId" ng-change="GetDealer(formData.AgentId,5)" class="form-control">
<option value="" >Please Select  Agent</option>  
                <option ng-repeat="Agent in AgentData" value="{{Agent.mstrid}}">{{Agent.mstruserid}}</option>           
            </select>
        </div>
        <div  class="form-group  col-lg-4 col-md-4 col-sm-12 col-xs-12 padding" ng-if="UserType == 2 || UserType == 0 ||  UserType == 1 ||  UserType == 5">
            <label>User</label>
            <select name="UserId" ng-model="formData.UserId" ng-change="GetDealer(formData.UserId,3)" class="form-control">
<option value="">Please Select User</option>  
                <option ng-repeat="User in userData" value="{{User.mstrid}}">{{User.mstruserid}}</option>           
            </select>
        </div>
        
         <div class="col-lg-7 col-md-12" style="padding:0px;">
        <div  class="form-group  col-lg-4 col-md-4 col-sm-12 col-xs-12 padding" >
            <label>Type</label>
            <select name="ReportType" ng-model="formData.ReportType" ng-change="GetReportId(formData.ReportType)" class="form-control">

                <option  value="1">Bet History</option>       
                <option  value="2">profit & Loss</option>           
                <option  value="3">Account Statements</option>           
                <option  value="4">Login History</option>               
            </select>
        </div>
		<div class="form-group  col-lg-4 col-md-4 col-sm-12 col-xs-12 padding" >
                  <label>From Date</label>
                 <md-content>
                        <md-datepicker class="form-control" md-placeholder="Enter Start date" ng-model="formData.from_date"   onkeydown="return false"  ng-change="formData.from_date.toISOString();setDateFun(1)" md-max-date="formData.MaxDate1" md-open-on-focus></md-datepicker>
                    </md-content>   
                    </div>
        <div class="form-group  col-lg-4 col-md-4 col-sm-12 col-xs-12 padding" >
                  <label>To Date</label>
                <md-content>
                        <md-datepicker class="form-control" md-placeholder="Enter End date" ng-model="formData.to_date"  md-min-date="formData.minDate1" md-max-date="formData.MaxDate2"  onkeydown="return false"  ng-change="formData.to_date.toISOString();setDateFun(1)" md-open-on-focus></md-datepicker>
                    </md-content>
                </div>
         </div>         
                
                
          <div class="col-lg-5 col-md-8" style="padding:0px;">   
       
	<div class="form-group  col-lg-6 col-md-6 col-sm-12 col-xs-12 padding" >
		          <label>From Time</label>
		         <input id="from_time" ng-model="formData.from_time" ng-disabled="formData.from_date == ''" placeholder="please enter start time" type="text" onkeydown="return false;" class="time form-control" />
		        </div>
	<div class="form-group  col-lg-6 col-md-6 col-sm-12 col-xs-12 padding" >
		          <label>To Time</label>
	       		         <input id="to_time" placeholder="please enter end time" ng-disabled="formData.to_date == ''" ng-model="formData.to_time" type="text" onkeydown="return false;" class="time form-control" />
		        </div>
               
       </div>         
                
              </div>       
               
              <div class="row">  
           <div class="form-group  col-lg-4 col-md-4 col-sm-12 col-xs-12 padding">
           <button type="button" class="btn btn-primary" ng-click="Allsport(1);ExportAllDate();" style="margin-top:18px;">Submit</button>
           <button type="button" class="btn btn-primary" ng-click="Reset();" style="margin-top:18px;">Reset</button>
  		 <div excel-export export-data="exportData" file-name="{{fileName}}" style="margin-top:18px;" ></div>
        </div>     
         
            </div>       
           


</form>

<div class="col-sm-12 col-md-12" ng-show="selectedtype == '2'">
    <!-- start Tab -->
    <div ng-cloak="" class="tabsdemoDynamicHeight" >
      <md-content>
        <md-tabs md-dynamic-height="" md-border-bottom="" md-selected="selectedIndex">
          
         <!--  <md-tab md-on-select="click_test(displyData.id)" ng-repeat="displyData in sprtData" label="{{displyData.name}}">
              <md-content class="md-padding" style="display:none;">
              </md-content>
          </md-tab>  -->
          <md-tab label="All" md-on-select="Allsport(1)" >
            <md-content class="md-padding" style="display:none;">
            </md-content>
          </md-tab>
          <md-tab label="Cricket" md-on-select="click_test(4,1)">
            <md-content class="md-padding" style="display:none;">
            </md-content>
          </md-tab>
          <md-tab label="Soccer" md-on-select="click_test(1,1)">
            <md-content class="md-padding" style="display:none;">
            </md-content>
          </md-tab>
          <md-tab label="Tennis" md-on-select="click_test(2,1)">
            <md-content class="md-padding" style="display:none;">
            </md-content>
          </md-tab> 

         <!-- <md-tab label="Horse Racing" md-on-select="click_test(7)">
            <md-content class="md-padding" style="display:none;">
            </md-content>
          </md-tab> -->
          <md-tab label="Fancy" md-on-select="click_test(-1,1)">
            <md-content class="md-padding" style="display:none;">
            </md-content>
          </md-tab>
          
                    
        </md-tabs>
      </md-content>
    </div>
    </div>


    <!-- end of Tab -->
    <div class="col-lg-12 col-md-12 col-sm-12 " >
        <div class="lst_master_top clearfix">
            <div class="form_row col-lg-12 col-md-12 col-sm-12 col-xs-12 clearfix top_table_form" style="padding: 0px;">
             
 

 <table class="table table-bordered table-condensed table-responsive" ng-show="selectedtype == '1'">  
         <thead>
            <tr class="bg-primary">
               <th>SNo</th>
               <th>Description</th>
	       <th ng-if="UserType=='1'">Agent</th>
               <th ng-if="UserType!=3">User Name</th>
               <th>Selection Name</th>
               <th>Type</th>
               <th>Match</th>
               <th>Amount</th>
               <th>Date</th>
               <th>P | L</th>
               <th>Profit</th>
               <th>Loss</th>
               <th>Status</th>

            </tr>
         </thead>   
         <tbody>
            <tr ng-repeat="GetbetData in userPL | orderBy:'MstDate':true" >
               <td>{{(currentPage-1)*entryLimit +$index+1}}</td>               
              
	 <td class="text-left">{{GetbetData.Description}}</td>
	<td ng-if="UserType=='1'">{{GetbetData.DealerNm}}</td>
               <td ng-if="UserType!=3">{{GetbetData.UserNm}}</td>
               <td>{{GetbetData.selectionName}}</td>
               <td><span class="badge " ng-class="{'badge-danger': GetbetData.Type == 'Lay' ,'badge-info': GetbetData.Type == 'Back' } ">{{GetbetData.Type =='Lay'?$root.Lay:$root.Back}}</span></td>
               <td>{{GetbetData.Odds}}</td>
               <td>{{GetbetData.Stack}}</td>
               <td>{{GetbetData.MstDate}}</td>
               <td>{{GetbetData.P_L}}</td>
               <td style="color:#50bd00;">{{GetbetData.Profit}}</td>
               <td ng-if="GetbetData.Liability>=0" style="color:#50bd00;">{{GetbetData.Liability}}</td>
               <td ng-if="GetbetData.Liability<0" style="color:RED;">{{GetbetData.Liability}}</td>
               <td>{{GetbetData.STATUS}}</td>
 		
            </tr>
         </tbody>
        </table>
<div class="total-box clearfix" ng-show="selectedtype == '1' && userPL.length > 0 ">
                        <h1 class="total-green">Total P&L: <span>{{userPL | sumOfValue:'P_L' | number:2}}</span></h1>
                        <h1 class="total-green">Total Profit: <span>{{SumOfProfit | number:2}}</span></h1>
                        <h1 class="total-red">Total Loss: <span>{{SumOfLiability | number:2}}</span></h1>
                    </div>
   <div class="total-box clearfix" ng-show="selectedtype == '1' && userPL.length > 0 ">
                        <h1 class="total-green">Grand Total P&L: <span>{{GrandSumOfP_L | number:2}}</span></h1>
                        <h1 class="total-green">Grand Total Profit: <span>{{GrandSumOfProfit | number:2}}</span></h1>
                        <h1 class="total-red">Grand  Total Loss: <span>{{GrandSumOfLiability | number:2}}</span></h1>
                    </div>
  
            </div>

  <table class="table table-bordered table-condensed table-responsive" ng-show="selectedtype == '2'">
                  <thead>               
                    <tr class="bg-primary">
                      <th>Sno</th>
                      <th>EventName</th>
                      <th>MarketName</th>
                      <th>P_L</th>
                      <th>Comm</th>
                      <th>CreatedOn</th>
              <th>Action</th>

                    </tr>
                  </thead>
                  <tbody>
                    <tr  ng-repeat="pldata in userPL | orderBy:'CreatedOn':true">
                      <td>{{(currentPage-1)*entryLimit +$index+1}}</td>
                      <td>{{pldata.EventName}}</td>
                      <td>{{pldata.MarketName}}</td>
                      <td ng-if="pldata.PnL >=0" style="color: green;">{{pldata.PnL}}</td>
                      <td ng-if="pldata.PnL <0" style="color: red;">{{pldata.PnL}}</td>

                      <td>{{pldata.Comm}}</td>
                      <td>{{pldata.CreatedOn}}</td>
<td><button class="btn btn-warning btn-sm" ng-click="showBet(pldata)">Show Bet</button>
		          <span ng-if="UserType==0" class="glyphicon glyphicon-trash" ng-click="deletePl(pldata.matchId)"></span>
                     </td>
                     
                    </tr>
                  <tbody>
                </table>
<div class="col-lg-12 col-md-12 col-sm-12 " ng-show="selectedtype == '2'  && userPL.length > 0 && selectedtype != '4'">
      <div class="row">
      <table class="table table-bordered table-condensed table-responsive" style="margin-bottom:0px;">
         <tfoot>
          <tr class="bg-warning" style="color:royalblue;">
              <td colspan="3"></td>
              <td><strong>(Total P & L )&emsp;    {{userPL | sumOfValue:'PnL'}}</strong></td>
              <td><strong>(Total Commission)&emsp;  {{userPL | sumOfValue:'Comm'}}</strong></td>                    
              <td colspan="2"></td>
          </tr>
      </tfoot>
      </table>
    </div>
    </div>
<div class="col-lg-12 col-md-12 col-sm-12 " ng-show="selectedtype == '2'  && userPL.length > 0 ">
      <div class="row">
      <table class="table table-bordered table-condensed table-responsive" style="margin-bottom:0px;">
         <tfoot>
          <tr class="bg-warning" style="color:royalblue;">
              <td colspan="3"></td>
              <td><strong>(Grand Total P & L )&emsp;    {{Grandtot_PnL}}</strong></td>
              <td><strong>(Grand Total Commission)&emsp;  {{Grandtot_Comm }}</strong></td>                    
              <td colspan="2"></td>
          </tr>
      </tfoot>
      </table>
    </div>
    </div>

  <table class="table table-bordered table-condensed table-responsive" ng-show="selectedtype == '3'">
                  <thead>               
                    <tr class="bg-primary">
                      <th>Sno</th>
                      <th>Date</th>
                      <th>UserName</th>
                      <th>Narration</th>
                      <th>Credit</th>
                      <th>Debit</th>
             		 <th>Balance</th>

                    </tr>
                  </thead>
                  <tbody>
                    <tr  ng-repeat="pldata in userPL | orderBy:'Sdate':true">
                      <td>{{(currentPage-1)*entryLimit +$index+1}}</td>
                      <td>{{pldata.Sdate}}</td>
                      <td>{{pldata.mstrUserId}}</td>
                      <td>{{pldata.Narration}}</td>
                      <td style="color: green;">{{pldata.Credit}}</td>
                      <td style="color: red;">{{pldata.Debit}}</td>
                      <td>{{pldata.Balance}}</td>
                     
                    </tr>
                  <tbody>
                </table>

<div class="total-box clearfix" ng-show=" selectedtype == '3' && userPL.length > 0">
                        <h1 class="total-green">Total Credit: <span>{{SumOfCredit | number:2}}</span></h1>
                        <h1 class="total-green">Total Debit: <span>{{SumOfDebit | number:2}}</span></h1>
                        <h1 class="total-red">Total Balance: <span>{{SumOfBalance | number:2}}</span></h1>
                    </div>

  
            </div>
	  

 <table class="table table-bordered table-condensed table-responsive" ng-show="selectedtype == '4'">
                  <thead>               
                    <tr class="bg-primary">
                      <th>Sno</th>
                      <th>Date</th>
                      <th>Ip Address</th>
                      <th>UserName</th>
                      <th>Device Info</th>
                      <th>Browser Info</th>
                    


                    </tr>
                  </thead>
                  <tbody>
                    <tr  ng-repeat="pldata in userPL | orderBy:'logstdt':true">
                      <td>{{(currentPage-1)*entryLimit +$index+1}}</td>
                      <td>{{pldata.logstdt}}</td>
                      <td>{{pldata.ipadress}}</td>
                      <td>{{pldata.mstruserid}}</td>
			<td>{{pldata.device_info}}</td>
                      <td>{{pldata.browser_info}}</td>
                     
                    </tr>
                  <tbody>
                </table>
 <div class="col-md-12" ng-show="userPL.length == 0">
		No Records Found

            </div>
       <div class="col-md-12" ng-show="totalCount > 0">
 <pagination total-items="totalCount" ng-model="currentPage" ng-click="Allsport(currentPage)" max-size="maxSize" class="pagination-sm" boundary-links="true" rotate="false" num-pages="noOfPages" items-per-page="entryLimit"></pagination>

            </div>
        </div>
    </div>
   
</div>
</div>

