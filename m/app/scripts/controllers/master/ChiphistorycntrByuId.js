app.controller("ChiphistorycntrByuId",["$scope","$http","$filter","$stateParams","sessionService","loginService","$rootScope","$location",function(e,t,i,a,r,l,o,n){e.loading=true;function s(){if(h){var e={getRows:function(e){setTimeout(function(){var t=h.slice(e.startRow,e.endRow),i=-1;h.length<=e.endRow&&(i=h.length),e.successCallback(t,i)},500)}};u.api.setDatasource(e)}}function c(e){h=e,s()}o.HelperAllRights!=angular.isUndefinedOrNull&&0==o.HelperAllRights.ChipHistory&&n.path("/dashboard/Home"),e.UserID=a.UserID,e.usetype=a.usetype,e.userName=a.userName;var d=[{headerName:"SNo",width:30,field:"SrNo"},{headerName:"Narration",width:600,field:"narration",cellStyle:{color:"BLACK","text-align":"left"}},{headerName:"Date",field:"EDate",width:130,cellStyle:{color:"BLACK","text-align":"center"}},{headerName:"Credit",field:"Credit",width:80,cellStyle:function (params) { return (params.data.Credit>=0 ? {color: 'green !important',"text-align":"right"} : {color: 'red !important',"text-align":"right"}); }},{headerName:"Debit",field:"Debit",width:80,cellStyle:function (params) { return (params.data.Debit>=0 ? {color: 'green !important',"text-align":"right"} : {color: 'red !important',"text-align":"right"}); }},{headerName:"Balance",field:"Balance",width:80,cellStyle:function (params) { return (params.data.Balance>=0 ? {color: 'green !important',"text-align":"right"} : {color: 'red !important',"text-align":"right"}); }},{headerName:"ID",width:50,field:"Mstcode"}],u={enableSorting:!0,enableFilter:!0,debug:!0,rowSelection:"multiple",enableColResize:!0,paginationPageSize:500,columnDefs:d,pagination:true};e.gridOptions=u;var h,p=document.querySelector("#myGrid");new agGrid.Grid(p,u);var g="null",f="null";t.get(BASE_URL+"Betentrycntr/Chip_historyById/"+a.UserID+"/"+a.usetype+"/5/"+a.parentId+"/"+g+"/"+f).success(function(t,i,a,r){e.loading=false;e.chip_data=t.chips_data,u.api.setRowData(e.chip_data),c(t.chips_data),e.SumOfCreadit=e.sum(e.chip_data,"Credit"),e.SumOfDebit=e.sum(e.chip_data,"Debit"),e.Total=e.SumOfCreadit-e.SumOfDebit,e.Total>=0?e.setClass=!0:e.setClass=!1}),e.onBtExport=function(){var t={skipHeader:!1,skipFooters:!0,skipGroups:!0,fileName:"ChipHistory_"+e.userName+".csv"};this.gridOptions.api.exportDataAsCsv(t)},e.history_back=function(){},e.sum=function(e,t){return e.reduce(function(e,i){return parseFloat(e)+parseFloat(i[t])},0)}}]);
